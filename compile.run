#!/bin/bash

set -e

PROJECT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" &>/dev/null && pwd)"
if [ -d "${PROJECT_DIR}/.conan/" ]
then
  echo "Conan directory is existed. Skip conan init (${PROJECT_DIR}/scripts/init_conan.sh)."
else
  bash ${PROJECT_DIR}/scripts/init_conan.sh
fi

cd build/
conan install .. --build=missing
cmake ..
make -j
